<div class="cu-board" appHorizontalControl>
  <div class="cu-board-header">
    <div class="cu-board-header__item" *ngFor="let board of boards" [ngStyle]="{ 'border-top-color': board.color }">
      <div class="cu-board-header__item-title">
        {{board.name}}
      </div>

      <div class="cu-board-header__item-tasks-count">{{board.tasks.length}}</div>
    </div>
  </div>

  <div class="cu-board-dashboard" cdkDropListGroup>
    <div
      *ngFor="let board of boards; let i = index"
      class="cu-board-dashboard__column"
      [id]="i.toString()"
      [cdkDropListData]="[board]"
      (cdkDropListDropped)="taskMove($event)"
      cdkDropList>

      <ng-container
        *ngFor="let task of board.tasks; let taskIndex = index"
      >
        <ng-container *ngIf="task?.isEditing">
          <cu-new-task (editDone)="taskEditDone($event, task, board)"></cu-new-task>
        </ng-container>

        <ng-container *ngIf="!task?.isEditing">
          <div
            cdkDrag
            [cdkDragData]="[task, taskIndex]"
            appNoPropagation
            stopEvent="mousedown"
          >
            <cu-task [task]="task" />
          </div>
        </ng-container>
      </ng-container>

      <button class="cu-board-dashboard__add-task" (click)="createNewTask(board)" appNoPropagation stopEvent="click">
        <span>+</span>
        <span>New Task</span>
      </button>
    </div>

  </div>
</div>
